CREATE DATABASE HStransporte;
USE HStransporte;

CREATE TABLE cargos (
  id int AUTO_INCREMENT,
  nome_cargo varchar(80),
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE Carga (
  id int AUTO_INCREMENT,
  produto varchar(100),
  peso decimal(10,2),
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE Destinatario (
  id int AUTO_INCREMENT,
  cnpj_cli varchar(18),
  cpf_cli varchar(14),
  nome_cli varchar(100),
  endereco_des varchar(150),
  tel_cli varchar(20),
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE Remetente (
  id int AUTO_INCREMENT,
  cnpj_reme varchar(18),
  cpf_reme varchar(14),
  nome_reme varchar(100),
  end_reme varchar(150),
  tel_reme varchar(20),
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE Motorista (
  id int AUTO_INCREMENT,
  cpf_motor varchar(14),
  nome_motor varchar(100),
  tel_motor varchar(20),
  idade_motor varchar(50),
  endereco_motor varchar(150),
  cnh_motor varchar(9),
  senha varchar(255) NOT NULL,
  cargo int,
  PRIMARY KEY (id),
  KEY FK_Motorista_cargos (cargo),
  CONSTRAINT FK_Motorista_cargos FOREIGN KEY (cargo) REFERENCES cargos (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE Usuario (
  id int AUTO_INCREMENT,
  login varchar(45) NOT NULL,
  email varchar(100) NOT NULL,
  senha varchar(255) NOT NULL,
  cargo int,
  token_val varchar(64),
  data_criacao datetime DEFAULT CURRENT_TIMESTAMP,
  cpf varchar(50),
  PRIMARY KEY (id),
  UNIQUE KEY email (email),
  KEY FK_Usuario_cargos (cargo),
  CONSTRAINT FK_Usuario_cargos FOREIGN KEY (cargo) REFERENCES cargos (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE Veiculo (
  id int AUTO_INCREMENT,
  modelo_vei varchar(50),
  placa_vei varchar(10),
  renavam varchar(15),
  motor_dono int,
  PRIMARY KEY (id),
  KEY motor_dono (motor_dono),
  CONSTRAINT Veiculo_ibfk_1 FOREIGN KEY (motor_dono) REFERENCES Motorista (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE Frete (
  id int AUTO_INCREMENT,
  frete_val decimal(10,2),
  motorista_frete int,
  remetente int,
  destinatario int,
  partida varchar(150),
  destino varchar(150),
  veiculo_frete int,
  carga_frete int,
  PRIMARY KEY (id),
  KEY motorista_frete (motorista_frete),
  KEY remetente (remetente),
  KEY destinatario (destinatario),
  KEY veiculo_frete (veiculo_frete),
  KEY carga_frete (carga_frete),
  CONSTRAINT Frete_ibfk_1 FOREIGN KEY (motorista_frete) REFERENCES Motorista (id),
  CONSTRAINT Frete_ibfk_2 FOREIGN KEY (remetente) REFERENCES Remetente (id),
  CONSTRAINT Frete_ibfk_3 FOREIGN KEY (destinatario) REFERENCES Destinatario (id),
  CONSTRAINT Frete_ibfk_4 FOREIGN KEY (veiculo_frete) REFERENCES Veiculo (id),
  CONSTRAINT Frete_ibfk_5 FOREIGN KEY (carga_frete) REFERENCES Carga (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
